
import jieba
from gensim.models import Word2Vec
import re

# 1. è®­ç»ƒæ”¯æŒç±»æ¯”æ¨ç†çš„æ¨¡å‹ï¼ˆä½¿ç”¨æ›´ä¸°å¯Œçš„è¯­ä¹‰å…³è”è¯­æ–™ï¼‰
corpus = [
    "å›½ç‹ ç”·äºº å¥³ç‹ å¥³äºº",
    "çˆ¶äº² å„¿å­ æ¯äº² å¥³å„¿",
    "åŒ»ç”Ÿ ç—…äºº è€å¸ˆ å­¦ç”Ÿ",
    "åŒ—äº¬ ä¸­å›½ åç››é¡¿ ç¾å›½",
    "å¤§ å° é•¿ çŸ­",
    "å¿« æ…¢ é«˜ ä½"
]
sentences = [text.split() for text in corpus]  # ç©ºæ ¼åˆ†è¯
model = Word2Vec(sentences, vector_size=100, window=2, min_count=1, sg=1)

# 2. ç±»æ¯”æ¨ç†å‡½æ•°
def word_analogy(a, b, c):
    """è®¡ç®— a - b + c çš„ç»“æœè¯"""
    try:
        # æ ¸å¿ƒï¼šå‘é‡è¿ç®— a_vec - b_vec + c_vec
        result = model.wv.most_similar(positive=[a, c], negative=[b], topn=1)
        return result[0][0]  # è¿”å›æœ€å¯èƒ½çš„è¯
    except KeyError as e:
        return f"é”™è¯¯ï¼šè¯ {e} ä¸åœ¨æ¨¡å‹è¯æ±‡è¡¨ä¸­"
    except Exception as e:
        return f"è®¡ç®—å¤±è´¥ï¼š{e}"

# 3. äº’åŠ¨å®éªŒ
print("ğŸ§ª è¯­ä¹‰ç±»æ¯”å®éªŒå®¤ï¼šéªŒè¯ 'a - b + c = ?'")
print("ç¤ºä¾‹ï¼šå›½ç‹ - ç”·äºº + å¥³äºº = å¥³ç‹ï¼›åŒ—äº¬ - ä¸­å›½ + ç¾å›½ = åç››é¡¿")

# å­¦ç”Ÿè¾“å…¥ï¼ˆå¯ä¿®æ”¹è¿™3ä¸ªè¯è¿›è¡Œå®éªŒï¼‰
a = input("è¯·è¾“å…¥è¯aï¼ˆå¦‚ï¼šå›½ç‹ï¼‰ï¼š")
b = input("è¯·è¾“å…¥è¯bï¼ˆå¦‚ï¼šç”·äººï¼‰ï¼š")
c = input("è¯·è¾“å…¥è¯cï¼ˆå¦‚ï¼šå¥³äººï¼‰ï¼š")

# è®¡ç®—å¹¶å±•ç¤ºç»“æœ
result = word_analogy(a, b, c)
print(f"\nğŸ“ æ¨ç†ç»“æœï¼š{a} - {b} + {c} = {result}")

# 4. æ¢ç´¢æç¤º
print("\nğŸ” å°è¯•è¿™äº›ç»„åˆï¼š")
print("1. çˆ¶äº² - å„¿å­ + å¥³å„¿ = ?")
print("2. åŒ»ç”Ÿ - ç—…äºº + å­¦ç”Ÿ = ?")
print("3. å¤§ - å° + çŸ­ = ?")
